<!doctype html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Liste - http://localhost:1313/">
    <title>DMA | VinhLin</title>
    <meta name="description" content="Technology Blog">
    <meta property="og:title" content="DMA" />
<meta property="og:description" content="Trong qu√° tr√¨nh t√¨m hi·ªÉu l·∫°i v·ªÅ DMA, m√¨nh l·∫°i v√¥ tr√¨nh bi·∫øt th√™m m·ªôt trang web chia s·∫ª ki·∫øn th·ª©c v·ªÅ ƒêi·ªán t·ª≠, L·∫≠p tr√¨nh,&hellip;
üëâ Website: L·∫≠p tr√¨nh - ƒêi·ªán t·ª≠
Ngo√†i ra m√¨nh c≈©ng t√¨m ƒëc m·ªôt b√†i vi·∫øt kh√° hay, c≈©ng li√™n quan m·ªôt ph·∫ßn ƒë·∫øn DMA.
üå± B√†i vi·∫øt C√°c k·ªπ thu·∫≠t thi·∫øt k·∫ø lu·ªìng x·ª≠ l√Ω trong ch∆∞∆°ng tr√¨nh nh√∫ng ƒê·ªëi v·ªõi m·ªôt s·ªë ch∆∞∆°ng tr√¨nh nh·ªè, c√°c ch∆∞∆°ng tr√¨nh m√† c√°c b·∫°n m·ªõi th·ª±c h√†nh (blink LED, ƒë·ªçc n√∫t b·∫•m, &hellip;) c√≥ m·ªôt ƒë·∫∑c ƒëi·ªÉm chung, ƒë√≥ l√† ch∆∞∆°ng tr√¨nh ƒë·ªÅu li√™n t·ª•c th·ª±c thi, ki·ªÉm tra m·ªôt s·ªë l·ªánh n√†o ƒë√≥, trong v√≤ng l·∫∑p while (1)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/iot/hardware/dma/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-10-11T14:21:00+07:00" />
<meta property="article:modified_time" content="2024-10-11T14:21:00+07:00" />

    <meta itemprop="name" content="DMA">
<meta itemprop="description" content="Trong qu√° tr√¨nh t√¨m hi·ªÉu l·∫°i v·ªÅ DMA, m√¨nh l·∫°i v√¥ tr√¨nh bi·∫øt th√™m m·ªôt trang web chia s·∫ª ki·∫øn th·ª©c v·ªÅ ƒêi·ªán t·ª≠, L·∫≠p tr√¨nh,&hellip;
üëâ Website: L·∫≠p tr√¨nh - ƒêi·ªán t·ª≠
Ngo√†i ra m√¨nh c≈©ng t√¨m ƒëc m·ªôt b√†i vi·∫øt kh√° hay, c≈©ng li√™n quan m·ªôt ph·∫ßn ƒë·∫øn DMA.
üå± B√†i vi·∫øt C√°c k·ªπ thu·∫≠t thi·∫øt k·∫ø lu·ªìng x·ª≠ l√Ω trong ch∆∞∆°ng tr√¨nh nh√∫ng ƒê·ªëi v·ªõi m·ªôt s·ªë ch∆∞∆°ng tr√¨nh nh·ªè, c√°c ch∆∞∆°ng tr√¨nh m√† c√°c b·∫°n m·ªõi th·ª±c h√†nh (blink LED, ƒë·ªçc n√∫t b·∫•m, &hellip;) c√≥ m·ªôt ƒë·∫∑c ƒëi·ªÉm chung, ƒë√≥ l√† ch∆∞∆°ng tr√¨nh ƒë·ªÅu li√™n t·ª•c th·ª±c thi, ki·ªÉm tra m·ªôt s·ªë l·ªánh n√†o ƒë√≥, trong v√≤ng l·∫∑p while (1)."><meta itemprop="datePublished" content="2024-10-11T14:21:00+07:00" />
<meta itemprop="dateModified" content="2024-10-11T14:21:00+07:00" />
<meta itemprop="wordCount" content="751">
<meta itemprop="keywords" content="" />
    
    <link rel="canonical" href="http://localhost:1313/posts/iot/hardware/dma/">
    <link rel="icon" href="http://localhost:1313//assets/favicon.ico">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link href="https://www.google-analytics.com" rel="preconnect" crossorigin>
    <link rel="alternate" type="application/atom+xml" title="VinhLin" href="http://localhost:1313//atom.xml" />
    <link rel="alternate" type="application/json" title="VinhLin" href="http://localhost:1313//feed.json" />
    <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=">
    
    
    <style>*,:after,:before{box-sizing:border-box;padding:0}body{font:1rem/1.5 '-apple-system',BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:2rem;background:#f5f5f5;color:#000}.skip-link{position:absolute;top:-40px;left:0;background:#eee;z-index:100}.skip-link:focus{top:0}h1,h2,h3,h4,h5,strong,b{font-size:inherit;font-weight:600}header{line-height:2;padding-bottom:1.5rem}.link{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.time{font-variant-numeric:tabular-nums;white-space:nowrap}blockquote{border-left:5px solid #eee;padding-left:1rem;margin:0}a,a:visited{color:inherit}a:hover,a.heading-link{text-decoration:none}pre{padding:.5rem;overflow:auto;overflow-x:scroll;overflow-wrap:normal}code,pre{font-family:San Francisco Mono,Monaco,consolas,lucida console,dejavu sans mono,bitstream vera sans mono,monospace;font-size:normal;font-size:small;background:#eee}code{margin:.1rem;border:none}ul{list-style-type:square}ul,ol{padding-left:1.2rem}.list{line-height:2;list-style-type:none;padding-left:0}.list li{padding-bottom:.1rem}.meta{color:#777}.content{max-width:70ch;margin:0 auto}header{line-height:2;display:flex;justify-content:space-between;padding-bottom:1rem}header a{text-decoration:none}header ul{list-style-type:none;padding:0}header li,header a{display:inline}h2.post{padding-top:.5rem}header ul a:first-child{padding-left:1rem}.nav{height:1px;background:#000;content:'';max-width:10%}.list li{display:flex;align-items:baseline}.list li time{flex:initial}.hr-list{margin-top:0;margin-bottom:0;margin-right:.5rem;margin-left:.5rem;height:1px;border:0;border-bottom:1px dotted #ccc;flex:1 0 1rem}.m,hr{border:0;margin:3rem 0}img{max-width:100%;height:auto}.post-date{margin:5% 0}.index-date{color:#9a9a9a}.animate-blink{animation:opacity 1s infinite;opacity:1}@keyframes opacity{0%{opacity:1}50%{opacity:.5}100%{opacity:0}}.tags{display:flex;justify-content:space-between}.tags ul{padding:0;margin:0}.tags li{display:inline}.avatar{height:120px;width:120px;position:relative;margin:-10px 0 0 15px;float:right;border-radius:50%}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;text-align:left;padding:8px}th{background-color:#f2f2f2} </style>
  
    
  
  
  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "articleSection": "posts",
      "name": "DMA",
      "headline": "DMA",
      "alternativeHeadline": "",
      "description": "Trong qu√° tr√¨nh t√¨m hi·ªÉu l·∫°i v·ªÅ DMA, m√¨nh l·∫°i v√¥ tr√¨nh bi·∫øt th√™m m·ªôt trang web chia s·∫ª ki·∫øn th·ª©c v·ªÅ ƒêi·ªán t·ª≠, L·∫≠p tr√¨nh,\u0026hellip;\nüëâ Website: L·∫≠p tr√¨nh - ƒêi·ªán t·ª≠\nNgo√†i ra m√¨nh c≈©ng t√¨m ƒëc m·ªôt b√†i vi·∫øt kh√° hay, c≈©ng li√™n quan m·ªôt ph·∫ßn ƒë·∫øn DMA.\nüå± B√†i vi·∫øt C√°c k·ªπ thu·∫≠t thi·∫øt k·∫ø lu·ªìng x·ª≠ l√Ω trong ch∆∞∆°ng tr√¨nh nh√∫ng ƒê·ªëi v·ªõi m·ªôt s·ªë ch∆∞∆°ng tr√¨nh nh·ªè, c√°c ch∆∞∆°ng tr√¨nh m√† c√°c b·∫°n m·ªõi th·ª±c h√†nh (blink LED, ƒë·ªçc n√∫t b·∫•m, \u0026hellip;) c√≥ m·ªôt ƒë·∫∑c ƒëi·ªÉm chung, ƒë√≥ l√† ch∆∞∆°ng tr√¨nh ƒë·ªÅu li√™n t·ª•c th·ª±c thi, ki·ªÉm tra m·ªôt s·ªë l·ªánh n√†o ƒë√≥, trong v√≤ng l·∫∑p while (1).",
      "inLanguage": "en-us",
      "isFamilyFriendly": "true",
      "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "http:\/\/localhost:1313\/posts\/iot\/hardware\/dma\/"
      },
      "author" : {
          "@type": "Person",
          "name": ""
      },
      "creator" : {
          "@type": "Person",
          "name": ""
      },
      "accountablePerson" : {
          "@type": "Person",
          "name": ""
      },
      "copyrightHolder" : "VinhLin",
      "copyrightYear" : "2024",
      "dateCreated": "2024-10-11T14:21:00.00Z",
      "datePublished": "2024-10-11T14:21:00.00Z",
      "dateModified": "2024-10-11T14:21:00.00Z",
      "publisher":{
          "@type":"Organization",
          "name": "VinhLin",
          "url": "http://localhost:1313/",
          "logo": {
              "@type": "ImageObject",
              "url": "http:\/\/localhost:1313\/assets\/favicon.ico",
              "width":"32",
              "height":"32"
          }
      },
      "image": "http://localhost:1313/assets/favicon.ico",
      "url" : "http:\/\/localhost:1313\/posts\/iot\/hardware\/dma\/",
      "wordCount" : "751",
      "genre" : [ ],
      "keywords" : [ ]
  }
  </script>
  
  
  </head>

<body>
  <a class="skip-link" href="#main">Skip to main</a>
  <main id="main">
  <div class="content">
    <header>
<p style="padding: 0;margin: 0;">
  <a href="/">
    <b>VinhLin</b>
    <span class="text-stone-500 animate-blink">‚ñÆ</span>
  </a>
</p>
<ul style="padding: 0;margin: 0;">
  
  
  <li class="">
    <a href="/changelog/"><span>Changelog</span></a>
    
  <li class="">
    <a href="/posts/"><span>Post</span></a>
    
  <li class="">
    <a href="/about/"><span>About</span></a>
    
  </li>
</ul>
</header>
<hr class="hr-list" style="padding: 0;margin: 0;">
    <section>
      <h2 class="post">DMA</h2>
      <p>Trong qu√° tr√¨nh t√¨m hi·ªÉu l·∫°i v·ªÅ <strong>DMA</strong>, m√¨nh l·∫°i v√¥ tr√¨nh bi·∫øt th√™m m·ªôt trang web chia s·∫ª ki·∫øn th·ª©c v·ªÅ <strong>ƒêi·ªán t·ª≠, L·∫≠p tr√¨nh,&hellip;</strong></p>
<p>üëâ Website: <a href="https://www.laptrinhdientu.com/">L·∫≠p tr√¨nh - ƒêi·ªán t·ª≠</a></p>
<p>Ngo√†i ra m√¨nh c≈©ng t√¨m ƒëc m·ªôt b√†i vi·∫øt kh√° hay, c≈©ng li√™n quan m·ªôt ph·∫ßn ƒë·∫øn DMA.</p>
<h2 id="-b√†i-vi·∫øt-c√°c-k·ªπ-thu·∫≠t-thi·∫øt-k·∫ø-lu·ªìng-x·ª≠-l√Ω-trong-ch∆∞∆°ng-tr√¨nh-nh√∫nghttpswwwlaptrinhdientucom202201embeddeddesignhtml">üå± B√†i vi·∫øt <a href="https://www.laptrinhdientu.com/2022/01/EmbeddedDesign.html">C√°c k·ªπ thu·∫≠t thi·∫øt k·∫ø lu·ªìng x·ª≠ l√Ω trong ch∆∞∆°ng tr√¨nh nh√∫ng</a></h2>
<blockquote>
<p>ƒê·ªëi v·ªõi m·ªôt s·ªë ch∆∞∆°ng tr√¨nh nh·ªè, c√°c ch∆∞∆°ng tr√¨nh m√† c√°c b·∫°n m·ªõi th·ª±c h√†nh (blink LED, ƒë·ªçc n√∫t b·∫•m, &hellip;) c√≥ m·ªôt ƒë·∫∑c ƒëi·ªÉm chung, ƒë√≥ l√† ch∆∞∆°ng tr√¨nh ƒë·ªÅu li√™n t·ª•c th·ª±c thi, ki·ªÉm tra m·ªôt s·ªë l·ªánh n√†o ƒë√≥, trong v√≤ng l·∫∑p while (1). ƒêi·ªÅu n√†y d·∫´n ƒë·∫øn nhi·ªÅu nh∆∞·ª£c ƒëi·ªÉm, ch·∫≥ng h·∫°n: Nh·ªØng l·ªánh ƒë·ª©ng sau ph·∫£i ƒë·ª£i nh·ªØng l·ªánh ƒë·ª©ng tr∆∞·ªõc th·ª±c thi xong, nh∆∞ v·∫≠y c√≥ th·ªÉ g√¢y b·ªè l·ª° c√°c s·ª± ki·ªán n·∫øu k√≠ch th∆∞·ªõc ch∆∞∆°ng tr√¨nh l·ªõn. </br></p>
</blockquote>
<blockquote>
<p>3 c√°ch thi·∫øt k·∫ø lu·ªìng x·ª≠ l√Ω ƒë∆°n gi·∫£n nh·∫•t trong ch∆∞∆°ng tr√¨nh nh√∫ng, ƒë√≥ l√† <code>Polling</code>, <code>Interrupt</code>, <code>DMA</code>. </br></p>
</blockquote>
<h3 id="polling">Polling</h3>
<ul>
<li>C√°ch m√† ch√∫ng ta v·∫´n hay l√†m nh∆∞ v·∫≠y, trong v√≤ng l·∫∑p <strong>while(1)</strong>, g·ªçi l√† k·ªπ thu·∫≠t Polling - li√™n t·ª•c ki·ªÉm tra, li√™n t·ª•c th·ª±c thi.</li>
</ul>
<p><img
  src="/image/IoT/DMA/Hinh_1.webp"
  alt="Hinh_1"
  loading="lazy"
  decoding="async"
  class="full-width"
/>

Hin</p>
<ul>
<li>Tuy nhi√™n, v·ªõi c√°c ch∆∞∆°ng tr√¨nh l·ªõn, ph·ª©c t·∫°p h∆°n, ƒë√≤i h·ªèi ƒë√°p ·ª©ng nhanh h∆°n, th√¨ polling s·∫Ω r·∫•t kh√≥ ƒë√°p ·ª©ng ƒë∆∞·ª£c. Polling trong c√°c tr∆∞·ªùng h·ª£p n√†y c√≥ th·ªÉ g√¢y m·∫•t c√°c s·ª± ki·ªán</li>
</ul>
<h3 id="interrupt">Interrupt</h3>
<ul>
<li>Hi·ªÉu ƒë∆°n gi·∫£n thay v√¨ li√™n t·ª•c ki·ªÉm tra n√∫t b·∫•m, ta c√†i ƒë·∫∑t cho n√≥ l√† 1 ng·∫Øt.</li>
<li>Th√¨ khi b·∫•m n√∫t, ch∆∞∆°ng tr√¨nh s·∫Ω b·ªã gi√°n ƒëo·∫°n, v√† CPU ph·∫£i ki·ªÉm tra xem ƒëi·ªÅu g√¨ ƒëang x·∫£y ra</li>
</ul>
<p><img
  src="/image/IoT/DMA/Hinh_2.webp"
  alt="Hinh_2"
  loading="lazy"
  decoding="async"
  class="full-width"
/>

</p>
<ul>
<li>∆Øu ƒëi·ªÉm l√† Interrupt l√† gi√∫p ch∆∞∆°ng tr√¨nh ƒë√°p ·ª©ng nhanh v·ªõi nh·ªØng c√°i ta c·∫ßn. C√≥ th·ªÉ s·ª≠ d·ª•ng ch·∫ø ƒë·ªô ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng khi vi ƒëi·ªÅu khi·ªÉn kh√¥ng l√†m g√¨.</li>
<li>Tuy nhi√™n, nh∆∞·ª£c ƒëi·ªÉm c·ªßa n√≥ l√† ta c·∫ßn kh·ªëng ch·∫ø ch∆∞∆°ng tr√¨nh con th·ª±c thi ng·∫Øt ISR ƒë·ªÉ tr√°nh vi·ªác ch∆∞∆°ng tr√¨nh ph·ª•c v·ª• m·ªôt ng·∫Øt qu√° l√¢u. L·ªùi khuy√™n l√† n√™n vi·∫øt ch∆∞∆°ng tr√¨nh ISR c√†ng ng·∫Øn v·ªÅ m·∫∑t th·ªùi gian c√†ng t·ªët.</li>
</ul>
<h3 id="markdma---direct-memory-accessmark"><mark>DMA - Direct Memory Access</mark></h3>
<ul>
<li>K·ªπ thu·∫≠t n√†y ƒë·ªÉ s·ª≠ d·ª•ng ƒë·ªÉ truy·ªÅn d·ªØ li·ªáu tr·ª±c ti·∫øp gi·ªØa b·ªô nh·ªõ v√† ngo·∫°i vi m√† kh√¥ng th√¥ng qua CPU (trong l√∫c n√†y, CPU c√≥ th·ªÉ l√†m vi·ªác kh√°c nh·ªù th·∫ø ti·∫øt ki·ªám th·ªùi gian CPU r·∫•t nhi·ªÅu).</li>
<li>Trong h·∫ßu h·∫øt c√°c thi·∫øt b·ªã nh√∫ng, c√°c thi·∫øt b·ªã ngo·∫°i vi kh√¥ng h·ªó tr·ª£ truy·ªÅn nhi·ªÅu bit c√πng l√∫c, v·ªõi ngo·∫°i l·ªá l√† giao th·ª©c CAN. Thay v√†o ƒë√≥, vi ƒëi·ªÅu khi·ªÉn (MCU) ph·∫£i ghi t·ª´ng byte m·ªôt, v√† sau ƒë√≥ ch·ªù cho ƒë·∫øn khi thi·∫øt b·ªã ngo·∫°i vi s·∫µn s√†ng ƒë·ªÉ g·ª≠i byte ti·∫øp theo.</li>
</ul>
<p>üí¨ C∆° ch·∫ø ho·∫°t ƒë·ªông th√¥ng th∆∞·ªùng c·ªßa Core:</p>
<p><img
  src="/image/IoT/DMA/Hinh_3.webp"
  alt="Hinh_3"
  loading="lazy"
  decoding="async"
  class="full-width"
/>

</p>
<blockquote>
<p>H√£y nh√¨n h√¨nh v·∫Ω tr√™n, CPU s·∫Ω ƒëi·ªÅu khi·ªÉn vi·ªác transfer data gi·ªØa Peripheral (UART, I2C, SPI, &hellip;) v√† b·ªô nh·ªõ (RAM) qua c√°c ƒë∆∞·ªùng bus. C∆° ch·∫ø n√†y ƒë∆∞·ª£c hi·ªÉu nh∆∞ c∆° ch·∫ø <strong>Master - Slave</strong>, v·ªõi CPU ƒë√≥ng vai tr√≤ l√† Master, Peripheral v√† Memory ƒë√≥ng vai tr√≤ nh∆∞ c√°c slave. N√™n vi·ªác giao ti·∫øp gi·ªØa 2 Slave s·∫Ω do Master ƒëi·ªÅu khi·ªÉn. </br></p>
</blockquote>
<blockquote>
<p>Tuy nhi√™n v·ªõi vi·ªác CPU ph·∫£i l√†m th√™m 1 c√¥ng vi·ªác quan tr·ªçng kh√°c - Fetch l·ªánh t·ª´ b·ªô nh·ªõ (FLASH) ƒë·ªÉ th·ª±c thi c√°c l·ªánh c·ªßa ch∆∞∆°ng tr√¨nh. V√¨ v·∫≠y, khi c·∫ßn truy·ªÅn d·ªØ li·ªáu li√™n t·ª•c gi·ªØa Peripheral v√† RAM, CPU s·∫Ω b·ªã chi·∫øm d·ª•ng, v√† kh√¥ng c√≥ th·ªùi gian l√†m c√°c c√¥ng vi·ªác kh√°c, ho·∫∑c c√≥ th·ªÉ g√¢y miss d·ªØ li·ªáu khi transfer. </br></p>
</blockquote>
<blockquote>
<p>Ch√≠nh v√¨ v·∫≠y, h·ªá th·ªëng h·ªó tr·ª£ m·ªôt <strong>Master</strong> kh√°c ƒë·ªÉ chuy√™n l√†m c√¥ng vi·ªác n√†y, ƒë√≥ l√† <strong>DMA</strong>. </br></p>
</blockquote>
<p>üí¨ M·ªôt s·ªë ki·∫øn tr√∫c Vi ƒëi·ªÅu khi·ªÉn kh√¥ng h·ªó tr·ª£ DMA (8051, AVR, PIC, &hellip;), c√≥ th·ªÉ s·ª≠ d·ª•ng b·ªô chip ngo√†i DMAC - DMA Controller ƒë·ªÉ thay th·ªÉ. ·ªû ƒë√¢y ch√∫ng ta ch·ªâ x√©t ƒë·∫øn c√°c d√≤ng c√≥ h·ªó tr·ª£ DMA n·ªôi, c·ª• th·ªÉ l√† trong Vi ƒëi·ªÅuk khi·ªÉn STM32.</p>
<ul>
<li>DMA cho ph√©p MCU thi·∫øt l·∫≠p m·ªôt lu·ªìng truy·ªÅn d·ªØ li·ªáu (g·ª≠i ho·∫∑c nh·∫≠n) v√† sau ƒë√≥ ch·ªù cho ƒë·∫øn khi lu·ªìng truy·ªÅn ho√†n t·∫•t. Khi s·ª≠ d·ª•ng DMA, sau khi b·∫Øt ƒë·∫ßu, MCU kh√¥ng c·∫ßn can thi·ªáp cho ƒë·∫øn khi vi·ªác truy·ªÅn d·ªØ li·ªáu ho√†n t·∫•t, c√≥ nghƒ©a l√† MCU c√≥ th·ªÉ th·ª±c hi·ªán c√°c t√≠nh to√°n kh√°c ho·∫∑c thi·∫øt l·∫≠p c√°c I/O kh√°c trong khi lu·ªìng truy·ªÅn ƒëang di·ªÖn ra.</li>
</ul>
<p><img
  src="/image/IoT/DMA/Hinh_4.webp"
  alt="Hinh_4"
  loading="lazy"
  decoding="async"
  class="full-width"
/>

</p>
<ul>
<li>T√†i li·ªáu tham kh·∫£o th√™m v·ªÅ DMA</li>
</ul>
<pre tabindex="0"><code>https://github.com/embassy-rs/embassy/wiki
https://www.laptrinhdientu.com/2022/04/DMA1.html
</code></pre>
      
      <div class="post-date">
        <span class="g time">October 11, 2024 </span> &#8729;
         
      </div>
      
    </section>
    
    
    
  </div>
</main>
</body>
</html>
